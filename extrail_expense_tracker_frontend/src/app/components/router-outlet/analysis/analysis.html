<!-- src/app/components/analysis/analysis.html -->
<div class="p-8 space-y-6 bg-gray-50 min-h-screen">
  <!-- Header with Month Selector -->
  <div class="flex items-center justify-between">
    <div>
      <h1 class="text-3xl font-bold text-gray-900">Analysis</h1>
      <p class="text-gray-600 mt-1">Track your spending patterns and trends</p>
    </div>
    
    <!-- Month Selector -->
    <div class="flex items-center gap-3">
      <label class="text-sm font-medium text-gray-700">Select Month:</label>
      <select [(ngModel)]="selectedMonth" 
              (change)="onMonthChange()"
              class="px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent bg-white">
        <option *ngFor="let month of availableMonths" [value]="month.value">
          {{ month.label }}
        </option>
      </select>
    </div>
  </div>

  <!-- Loading State -->
  <div *ngIf="isLoading" class="flex items-center justify-center h-64">
    <div class="text-center">
      <div class="animate-spin rounded-full h-12 w-12 border-b-2 border-purple-600 mx-auto"></div>
      <p class="mt-4 text-gray-600">Loading analysis...</p>
    </div>
  </div>

  <!-- Statistics Cards -->
  <div *ngIf="!isLoading" class="grid grid-cols-1 md:grid-cols-4 gap-4">
    <div class="bg-white rounded-xl shadow-sm ring-1 ring-gray-100 p-6">
      <p class="text-sm font-medium text-gray-600">Total Spent</p>
      <p class="text-3xl font-bold text-gray-900 mt-2">{{ formatCurrency(totalSpent) }}</p>
    </div>
    
    <div class="bg-white rounded-xl shadow-sm ring-1 ring-gray-100 p-6">
      <p class="text-sm font-medium text-gray-600">Daily Average</p>
      <p class="text-3xl font-bold text-gray-900 mt-2">{{ formatCurrency(averageDailySpending) }}</p>
    </div>
    
    <div class="bg-white rounded-xl shadow-sm ring-1 ring-gray-100 p-6">
      <p class="text-sm font-medium text-gray-600">Highest Spending Day</p>
      <p class="text-3xl font-bold text-gray-900 mt-2">{{ highestSpendingDay }}</p>
    </div>
    
    <div class="bg-white rounded-xl shadow-sm ring-1 ring-gray-100 p-6">
      <p class="text-sm font-medium text-gray-600">Top Category</p>
      <p class="text-2xl font-bold text-gray-900 mt-2">{{ topCategory }}</p>
    </div>
  </div>

  <!-- Bar Chart: Category Spending -->
  <div *ngIf="!isLoading" class="bg-white rounded-2xl shadow-sm ring-1 ring-gray-100 p-6">
    <h2 class="text-xl font-bold text-gray-900 mb-4">Spending by Category</h2>
    <app-bar-chart [data]="categorySpendingData"></app-bar-chart>
  </div>

  <!-- Line Chart: Daily Spending -->
  <div *ngIf="!isLoading" class="bg-white rounded-2xl shadow-sm ring-1 ring-gray-100 p-6">
    <h2 class="text-xl font-bold text-gray-900 mb-4">Daily Spending Trend</h2>
    <app-filter-bar [data]="dailySpendingData"></app-filter-bar>
  </div>
</div>
